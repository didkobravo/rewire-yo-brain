<!DOCTYPE html>
<html lang="bg">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>rewire-yo-brain</title>
    <style>
      /* CSS Custom Properties - OpenProps inspired */
      :root {
        --size-1: 0.25rem;
        --size-2: 0.5rem;
        --size-3: 0.75rem;
        --size-4: 1rem;
        --size-5: 1.25rem;
        --size-6: 1.5rem;
        --size-7: 1.75rem;
        --size-8: 2rem;
        --size-10: 2.5rem;
        --size-12: 3rem;
        --size-16: 4rem;
        --size-20: 5rem;
        --size-24: 6rem;

        --font-size-0: 0.75rem;
        --font-size-1: 1rem;
        --font-size-2: 1.125rem;
        --font-size-3: 1.25rem;
        --font-size-4: 1.5rem;
        --font-size-5: 2rem;
        --font-size-6: 2.5rem;
        --font-size-7: 3rem;
        --font-size-8: 4rem;

        --primary: #2563eb;
        --primary-light: #3b82f6;
        --secondary: #059669;
        --surface: #ffffff;
        --surface-2: #f8fafc;
        --text: #0f172a;
        --text-2: #475569;

        --radius-2: 0.375rem;
        --radius-3: 0.5rem;
        --radius-4: 0.75rem;

        --shadow-1: 0 1px 3px 0 rgb(0 0 0 / 0.1),
          0 1px 2px -1px rgb(0 0 0 / 0.1);
        --shadow-2: 0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-3: 0 10px 15px -3px rgb(0 0 0 / 0.1),
          0 4px 6px -4px rgb(0 0 0 / 0.1);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: system-ui, -apple-system, sans-serif;
        background: var(--surface-2);
        color: var(--text);
        overflow: hidden;
        height: 100vh;
      }

      /* Main vertical container for exercise types */
      .exercise-container {
        height: 100vh;
        overflow-y: auto;
        scroll-snap-type: y mandatory;
        scroll-behavior: smooth;
      }

      /* Each exercise type section */
      .exercise-section {
        height: 100vh;
        scroll-snap-align: start;
        display: flex;
        flex-direction: column;
        padding: var(--size-4);
        position: relative;
      }

      .exercise-section:nth-child(1) {
        background: linear-gradient(135deg, #e0f2fe 0%, #b3e5fc 100%);
      }
      .exercise-section:nth-child(2) {
        background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
      }
      .exercise-section:nth-child(3) {
        background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
      }
      .exercise-section:nth-child(4) {
        background: linear-gradient(135deg, #fff3e0 0%, #ffcc80 100%);
      }

      /* Exercise title */
      .exercise-title {
        font-size: var(--font-size-6);
        font-weight: 700;
        text-align: center;
        margin-bottom: var(--size-6);
        color: var(--text);
      }

      /* Horizontal carousel for items within exercise */
      .carousel {
        flex: 1;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
        display: flex;
        gap: var(--size-4);
        padding: var(--size-4) 0;
      }

      /* Individual carousel item */
      .carousel-item {
        min-width: 80vw;
        scroll-snap-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: var(--surface);
        border-radius: var(--radius-4);
        box-shadow: var(--shadow-3);
        padding: var(--size-8);
        margin: 0 var(--size-2);
        cursor: pointer;
        transition: transform 0.2s ease;
      }

      .carousel-item:hover {
        transform: scale(1.02);
      }

      .carousel-item:active {
        transform: scale(0.98);
      }

      /* Content styling */
      .item-content {
        font-size: var(--font-size-8);
        font-weight: 600;
        color: var(--primary);
        text-align: center;
        margin-bottom: var(--size-4);
      }

      .item-subtitle {
        font-size: var(--font-size-4);
        color: var(--text-2);
        text-align: center;
      }

      /* Navigation hints */
      .nav-hint {
        position: absolute;
        font-size: var(--font-size-2);
        color: var(--text-2);
        opacity: 0.7;
      }

      .nav-hint.vertical {
        right: var(--size-4);
        top: 50%;
        transform: translateY(-50%) rotate(90deg);
      }

      .nav-hint.horizontal {
        bottom: var(--size-4);
        left: 50%;
        transform: translateX(-50%);
      }

      /* Progress indicator */
      .progress {
        position: fixed;
        top: var(--size-4);
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: var(--size-2);
        z-index: 100;
      }

      .progress-dot {
        width: var(--size-3);
        height: var(--size-3);
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        transition: background 0.3s ease;
      }

      .progress-dot.active {
        background: var(--primary);
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .carousel-item {
          min-width: 90vw;
        }

        .item-content {
          font-size: var(--font-size-7);
        }
      }

      @media (orientation: landscape) and (max-height: 600px) {
        .exercise-title {
          font-size: var(--font-size-4);
          margin-bottom: var(--size-4);
        }

        .item-content {
          font-size: var(--font-size-6);
        }
      }
    </style>
  </head>
  <body>
    <div class="progress" id="progress">
      <div class="progress-dot active"></div>
      <div class="progress-dot"></div>
      <div class="progress-dot"></div>
      <div class="progress-dot"></div>
    </div>

    <div class="exercise-container" id="exerciseContainer">
      <!-- Numbers Exercise -->
      <section class="exercise-section">
        <h1 class="exercise-title">–ß–∏—Å–ª–∞</h1>
        <div class="carousel">
          <div class="carousel-item" data-audio="–µ–¥–Ω–æ">
            <div class="item-content">1</div>
            <div class="item-subtitle">–µ–¥–Ω–æ</div>
          </div>
          <div class="carousel-item" data-audio="–¥–≤–µ">
            <div class="item-content">2</div>
            <div class="item-subtitle">–¥–≤–µ</div>
          </div>
          <div class="carousel-item" data-audio="—Ç—Ä–∏">
            <div class="item-content">3</div>
            <div class="item-subtitle">—Ç—Ä–∏</div>
          </div>
          <div class="carousel-item" data-audio="—á–µ—Ç–∏—Ä–∏">
            <div class="item-content">4</div>
            <div class="item-subtitle">—á–µ—Ç–∏—Ä–∏</div>
          </div>
          <div class="carousel-item" data-audio="–ø–µ—Ç">
            <div class="item-content">5</div>
            <div class="item-subtitle">–ø–µ—Ç</div>
          </div>
        </div>
        <div class="nav-hint horizontal">‚Üê —Å–≤–∞–π–ø –∑–∞ —Å–ª–µ–¥–≤–∞—â–æ ‚Üí</div>
        <div class="nav-hint vertical">‚Üë‚Üì –∑–∞ –¥—Ä—É–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</div>
      </section>

      <!-- Days Exercise -->
      <section class="exercise-section">
        <h1 class="exercise-title">–î–Ω–∏ –æ—Ç —Å–µ–¥–º–∏—Ü–∞—Ç–∞</h1>
        <div class="carousel">
          <div class="carousel-item" data-audio="–ø–æ–Ω–µ–¥–µ–ª–Ω–∏–∫">
            <div class="item-content">–ü–û–ù</div>
            <div class="item-subtitle">–ø–æ–Ω–µ–¥–µ–ª–Ω–∏–∫</div>
          </div>
          <div class="carousel-item" data-audio="–≤—Ç–æ—Ä–Ω–∏–∫">
            <div class="item-content">–í–¢–û</div>
            <div class="item-subtitle">–≤—Ç–æ—Ä–Ω–∏–∫</div>
          </div>
          <div class="carousel-item" data-audio="—Å—Ä—è–¥–∞">
            <div class="item-content">–°–†–Ø</div>
            <div class="item-subtitle">—Å—Ä—è–¥–∞</div>
          </div>
          <div class="carousel-item" data-audio="—á–µ—Ç–≤—ä—Ä—Ç—ä–∫">
            <div class="item-content">–ß–ï–¢</div>
            <div class="item-subtitle">—á–µ—Ç–≤—ä—Ä—Ç—ä–∫</div>
          </div>
          <div class="carousel-item" data-audio="–ø–µ—Ç—ä–∫">
            <div class="item-content">–ü–ï–¢</div>
            <div class="item-subtitle">–ø–µ—Ç—ä–∫</div>
          </div>
          <div class="carousel-item" data-audio="—Å—ä–±–æ—Ç–∞">
            <div class="item-content">–°–™–ë</div>
            <div class="item-subtitle">—Å—ä–±–æ—Ç–∞</div>
          </div>
          <div class="carousel-item" data-audio="–Ω–µ–¥–µ–ª—è">
            <div class="item-content">–ù–ï–î</div>
            <div class="item-subtitle">–Ω–µ–¥–µ–ª—è</div>
          </div>
        </div>
        <div class="nav-hint horizontal">‚Üê —Å–≤–∞–π–ø –∑–∞ —Å–ª–µ–¥–≤–∞—â–æ ‚Üí</div>
        <div class="nav-hint vertical">‚Üë‚Üì –∑–∞ –¥—Ä—É–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</div>
      </section>

      <!-- Opposites Exercise -->
      <section class="exercise-section">
        <h1 class="exercise-title">–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç–∏</h1>
        <div class="carousel">
          <div class="carousel-item" data-audio="–≥–æ–ª—è–º –º–∞–ª—ä–∫">
            <div class="item-content">–≥–æ–ª—è–º ‚Üî –º–∞–ª—ä–∫</div>
            <div class="item-subtitle">big ‚Üî small</div>
          </div>
          <div class="carousel-item" data-audio="–≥–æ—Ä–µ –¥–æ–ª—É">
            <div class="item-content">–≥–æ—Ä–µ ‚Üî –¥–æ–ª—É</div>
            <div class="item-subtitle">up ‚Üî down</div>
          </div>
          <div class="carousel-item" data-audio="—à–∏—Ä–æ–∫ —Ç–µ—Å–µ–Ω">
            <div class="item-content">—à–∏—Ä–æ–∫ ‚Üî —Ç–µ—Å–µ–Ω</div>
            <div class="item-subtitle">wide ‚Üî narrow</div>
          </div>
          <div class="carousel-item" data-audio="—á–µ—Ä–µ–Ω –±—è–ª">
            <div class="item-content">—á–µ—Ä–µ–Ω ‚Üî –±—è–ª</div>
            <div class="item-subtitle">black ‚Üî white</div>
          </div>
        </div>
        <div class="nav-hint horizontal">‚Üê —Å–≤–∞–π–ø –∑–∞ —Å–ª–µ–¥–≤–∞—â–æ ‚Üí</div>
        <div class="nav-hint vertical">‚Üë‚Üì –∑–∞ –¥—Ä—É–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</div>
      </section>

      <!-- Logic Questions Exercise -->
      <section class="exercise-section">
        <h1 class="exercise-title">–õ–æ–≥–∏—á–µ—Å–∫–∏ –≤—ä–ø—Ä–æ—Å–∏</h1>
        <div class="carousel">
          <div class="carousel-item" data-audio="–∑–º–∏—è—Ç–∞ –∏–º–∞ –ª–∏ –∫—Ä–∞–∫–∞">
            <div class="item-content">üêç</div>
            <div class="item-subtitle">–ó–º–∏—è—Ç–∞ –∏–º–∞ –ª–∏ –∫—Ä–∞–∫–∞?</div>
          </div>
          <div class="carousel-item" data-audio="–ª–æ–¥–∫–∞—Ç–∞ –∏–º–∞ –ª–∏ –≥—É–º–∏">
            <div class="item-content">‚õµ</div>
            <div class="item-subtitle">–õ–æ–¥–∫–∞—Ç–∞ –∏–º–∞ –ª–∏ –≥—É–º–∏?</div>
          </div>
          <div class="carousel-item" data-audio="–ø—Ç–∏—Ü–∞—Ç–∞ –º–æ–∂–µ –ª–∏ –¥–∞ –ª–µ—Ç–∏">
            <div class="item-content">üê¶</div>
            <div class="item-subtitle">–ü—Ç–∏—Ü–∞—Ç–∞ –º–æ–∂–µ –ª–∏ –¥–∞ –ª–µ—Ç–∏?</div>
          </div>
          <div class="carousel-item" data-audio="—Ä–∏–±–∞—Ç–∞ –∂–∏–≤–µ–µ –ª–∏ –≤—ä–≤ –≤–æ–¥–∞—Ç–∞">
            <div class="item-content">üêü</div>
            <div class="item-subtitle">–†–∏–±–∞—Ç–∞ –∂–∏–≤–µ–µ –ª–∏ –≤—ä–≤ –≤–æ–¥–∞—Ç–∞?</div>
          </div>
        </div>
        <div class="nav-hint horizontal">‚Üê —Å–≤–∞–π–ø –∑–∞ —Å–ª–µ–¥–≤–∞—â–æ ‚Üí</div>
        <div class="nav-hint vertical">‚Üë‚Üì –∑–∞ –¥—Ä—É–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</div>
      </section>
    </div>

    <script>
      // Progress indicator update
      const exerciseContainer = document.getElementById('exerciseContainer');
      const progressDots = document.querySelectorAll('.progress-dot');

      const ELEVENLABS_API_KEY =
        'sk_0cdf2af8269c28032829010740983f4769a3cf7082ebc0fe';
      // This is Adam (multilingual) - good for Bulgarian
      // const VOICE_ID = 'pNInz6obpgDQGcFmaJgB';
      const VOICE_ID = 'M1ydWt7KnBCiuv4CnEDC';

      async function playElevenLabsAudio(text) {
        try {
          const response = await fetch(
            `https://api.elevenlabs.io/v1/text-to-speech/${VOICE_ID}`,
            {
              method: 'POST',
              headers: {
                Accept: 'audio/mpeg',
                'Content-Type': 'application/json',
                'xi-api-key': ELEVENLABS_API_KEY,
              },
              body: JSON.stringify({
                text: text,
                model_id: 'eleven_multilingual_v2',
                voice_settings: {
                  stability: 0.5,
                  similarity_boost: 0.5,
                },
              }),
            }
          );

          if (response.ok) {
            const audioBlob = await response.blob();
            const audioUrl = URL.createObjectURL(audioBlob);
            const audio = new Audio(audioUrl);
            audio.play();
          }
        } catch (error) {
          console.log('Audio error:', error);
        }
      }

      exerciseContainer.addEventListener('scroll', () => {
        const scrollTop = exerciseContainer.scrollTop;
        const sectionHeight = window.innerHeight;
        const currentSection = Math.round(scrollTop / sectionHeight);

        progressDots.forEach((dot, index) => {
          dot.classList.toggle('active', index === currentSection);
        });
      });

      // Replace the existing carousel-item click handler with:
      document.querySelectorAll('.carousel-item').forEach((item) => {
        item.addEventListener('click', () => {
          const audioData = item.getAttribute('data-audio');

          // Visual feedback
          item.style.background = 'var(--secondary)';
          item.style.color = 'white';

          // Play ElevenLabs audio
          playElevenLabsAudio(audioData);

          setTimeout(() => {
            item.style.background = 'var(--surface)';
            item.style.color = 'var(--primary)';
          }, 300);
        });
      });

      // Keyboard navigation for testing
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowDown') {
          exerciseContainer.scrollBy(0, window.innerHeight);
        } else if (e.key === 'ArrowUp') {
          exerciseContainer.scrollBy(0, -window.innerHeight);
        }
      });
    </script>
  </body>
</html>
